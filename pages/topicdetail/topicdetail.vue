<template>
	<view>
		<!-- å¤´éƒ¨ -->
        <toPic :item="topicobj"></toPic>
		<!-- åˆ‡æ¢å¯¼èˆª -->
		<swiperHead
		:tablist="tablist"
		:tabindex="tabindex"
		:linewidth="linewidth"
		:scroll="scroll"
		@tabtap="tabtap"
		itemwidth="width:50%;"
		></swiperHead>
		<!-- åˆ—è¡¨ -->
		<view class="topiclistdetal">
			<block v-for="(item,index) in topiclista" :key="index">
				<template v-if="tabindex==index">
					<block v-for="(lista,listindex) in item.list" :key="listindex">
						<comonNews
						:item="lista"
						:index="listindex"
						@isgz="isgz(listindex)"
						></comonNews>
					</block>
					<!-- åŠ è½½æ›´å¤š -->					
					<load-more :loadtext="item.loadtext"></load-more>
				</template>
			</block>
		</view>
	</view>
</template>

<script>
	import toPic from "../../compoents/topic/topic.vue";
	import swiperHead from '../../compoents/index/swiper-head.vue';
	import comonNews from '../../compoents/common/comon-news.vue';
	import loadMore from '../../compoents/common/load-more.vue';
	export default {
		components:{
			toPic,
			swiperHead,
			comonNews,
			loadMore
		},
		data() {
			return {	
				tabindex:0,
				linewidth:38,
				scroll:0,
				topicobj:{
					titleimg:'../../static/topicpic/13.jpeg',
					titlename:'å¿†å¾€äº‹ï¼Œæ•¬ä½™ç”Ÿ',
					dongtainum:'793',
					jinrinum:'641',
					desc:'é¢è¯•å®˜ï¼šåœ¨ç”µæ¢¯é‡Œå¶é‡é©¬äº‘ä½ ä¼šåšä»€ä¹ˆï¼Ÿ90åå¥³å­©çš„å›ç­”å½“åœºè¢«å½•ç”¨'			
				},
				tablist:[
					{name:"é»˜è®¤",id:"moren"},
					{name:"æœ€æ–°",id:"zuixin"}
				],
				topiclista:[
					{
						loadtext:"ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†",
						list:[
							{
								//æ–‡å­—
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//å›¾æ–‡
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//è§†é¢‘
							  userimg:'../../static/userpic/19.jpg',
							  username:'æå››',
							  userage:'37',
							  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:{
								  bofangnum:'20w',
								  shijian:'2:47'
							  },
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							}
						]
					},
					{
						loadtext:"ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†",
						list:[
							{
								//æ–‡å­—
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//å›¾æ–‡
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//è§†é¢‘
							  userimg:'../../static/userpic/19.jpg',
							  username:'æå››',
							  userage:'37',
							  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:{
								  bofangnum:'20w',
								  shijian:'2:47'
							  },
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							}
						]
					}
				]
			}
		},
		onReachBottom(){
			this.loadtop();
		},
		methods: {
			tabtap(index){
				this.tabindex=index;
				// console.log(this.tablist[index]);
			},
			//ç›‘å¬å¯¼èˆªçš„index
			watchchange(e){
				this.tabindex=e.detail.current;
			},
			isgz(listindex){
				this.topiclista[this.tabindex].list[listindex].isguanzhu=true;
				uni.showToast({
					title:'å…³æ³¨æˆåŠŸ',
					icon:'none',
					mask:true
				})
			},
			//ä¸Šæ‹‰åŠ è½½
			loadtop(){
				if(this.topiclista[this.tabindex].loadtext!="ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†"){return;}					
				this.topiclista[this.tabindex].loadtext="åŠ è½½ä¸­o(*ï¿£â–½ï¿£*)ãƒ–";
				setTimeout(()=> {
					let obj={
								//è§†é¢‘
							  userimg:'../../static/userpic/19.jpg',
							  username:'æå››',
							  userage:'37',
							  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:{
								  bofangnum:'20w',
								  shijian:'2:47'
							  },
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							};
					this.topiclista[this.tabindex].list.push(obj);
					this.topiclista[this.tabindex].loadtext="ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†";					  
					//this.newlist[index1].loadtext="æ²¡æœ‰æ›´å¤šæ•°æ®äº†/(ã„’oã„’)/~~";					 
				}, 1000);
				
				
			}				
		}
	}
</script>

<style>

</style>
