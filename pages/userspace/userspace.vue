<template>
	<view>
		<!-- å¤´éƒ¨ -->
		<tauserSpaceHeadgSex :userinfo="userinfo"></tauserSpaceHeadgSex>
		<!-- æ•°æ® -->
		<view class="userspace-data">
			<homeData :homedata="spacedata"></homeData>
		</view>
		<!-- çº¿ -->
		<view class="userspace-xian"></view>
		<!-- åˆ‡æ¢å¯¼èˆª -->
		<swiperHead
		:tablist="tablist"
		:tabindex="tabindex"
		:linewidth="linewidth"
		:scroll="scroll"
		@tabtap="tabtap"
		itemwidth="width:33.33%;"
		></swiperHead>
		<!-- åˆ—è¡¨ -->
		<block v-for="(item,index) in topiclista" :key="index">
			<template v-if="tabindex==index">
				<template v-if="tabindex==0">
					<!-- ä¸»é¡µ -->
					<userSpaceZhuye :userinfo="userinfo"></userSpaceZhuye>
				</template>
				<block v-for="(lista,listindex) in item.list" :key="listindex">
						<comonNews
						:item="lista"
						:index="listindex"
						@isgz="isgz(listindex)"
						></comonNews>
				</block>
				<!-- åŠ è½½æ›´å¤š -->					
				<load-more :loadtext="item.loadtext"></load-more>
			</template>
		</block>
		<userSpacePop 
		:showpop="showpop"
		@hidepop="hidepop"
		@lahei="lahei"
		@beizhu="beizhu"
		></userSpacePop>
	</view>
</template>

<script>
	import tagSex from '../../compoents/common/tag-sex.vue';
	import tauserSpaceHeadgSex from '../../compoents/userspace/user-space-head.vue';
	import homeData from '../../compoents/home/home-data.vue';
	import swiperHead from '../../compoents/index/swiper-head.vue';	
	import userSpaceZhuye from '../../compoents/userspace/user-space-zhuye.vue';	
	import comonNews from '../../compoents/common/comon-news.vue';
	import loadMore from '../../compoents/common/load-more.vue';
	import userSpacePop from '../../compoents/userspace/user-space-pop.vue';
	export default {
		components:{
			tagSex,
			tauserSpaceHeadgSex,
			homeData,
			swiperHead,
			userSpaceZhuye,
			comonNews,
			loadMore,
			userSpacePop
		},
		data() {
			return {
				showpop:false,
				tabindex:0,
				linewidth:38,
				scroll:0,
				userinfo:{
					userbg:1,
					userpic:'../../static/userpic/14.jpg',
					username:'æ¢¦æƒ³',
					age:'20',
					sex: 0,
					isguanzhu:false,
					qiuage:'2020-01-01',
					id:1215,
					birthday:'1997-04-07',
					job:'IT',
					path:'å±±ä¸œæ£åº„',
					qg:'æœªå©š'
				},
				spacedata:[
					{name:'è·èµ',num:"10k"},
					{name:'å…³æ³¨',num:11},
					{name:'ç²‰ä¸',num:12}
				],
				tablist:[
					{name:"ä¸»é¡µ",id:"zhuye"},
					{name:"ç³—äº‹",id:"qiushi"},
					{name:"åŠ¨æ€",id:"dongtai"}
				],
				topiclista:[{},
					{
						loadtext:"ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†",
						list:[
							{
								//æ–‡å­—
							  userimg:'../../static/userpic/20.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//å›¾æ–‡
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//è§†é¢‘
							  userimg:'../../static/userpic/19.jpg',
							  username:'æå››',
							  userage:'37',
							  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:{
								  bofangnum:'20w',
								  shijian:'2:47'
							  },
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							}
						]
					},
					{
						loadtext:"ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†",
						list:[
							{
								//æ–‡å­—
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//å›¾æ–‡
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:false,
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
								//è§†é¢‘
							  userimg:'../../static/userpic/19.jpg',
							  username:'æå››',
							  userage:'37',
							  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:{
								  bofangnum:'20w',
								  shijian:'2:47'
							  },
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							},
							{
							  userimg:'../../static/userpic/19.jpg',
							  username:'å¼ ä¸‰',
							  userage:'30',
							  sex:0,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'',
							  video:false,
							  sharea:{
								  shareimg:'../../static/datapic/44.jpg',
								  sharetitle:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼'
							  },
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							}
						]
					}
				]
			}
		},
		onReachBottom(){
			this.loadtop();
		},
		onNavigationBarButtonTap(e) {
			if(e.index==0){
				this.hidepop();
			}
		},
		methods:{
			hidepop(){
				 this.showpop=!this.showpop;
			},
			lahei(){
				this.hidepop();
			},
			beizhu(){
				this.hidepop();
			},
			isgz(listindex){
				this.topiclista[this.tabindex].list[listindex].isguanzhu=true;
				uni.showToast({
					title:'å…³æ³¨æˆåŠŸ',
					icon:'none',
					mask:true
				})
			},
			//åˆ‡æ¢tabé€‰é¡¹å¡
			tabtap(index){
				this.tabindex=index;
			},
			//ä¸Šæ‹‰åŠ è½½
			loadtop(){
				if(this.topiclista[this.tabindex].loadtext!="ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†"){return;}					
				this.topiclista[this.tabindex].loadtext="åŠ è½½ä¸­o(*ï¿£â–½ï¿£*)ãƒ–";
				setTimeout(()=> {
					let obj={
								//è§†é¢‘
							  userimg:'../../static/userpic/19.jpg',
							  username:'æå››',
							  userage:'37',
							  sex:1,//0ä»£è¡¨ç”·ï¼Œ1 ä»£è¡¨å¥³
							  isguanzhu:false,
							  title:'åº†ç¥ç¥–å›½æˆç«‹70å‘¨å¹´ï¼',
							  titleimg:'../../static/datapic/44.jpg',
							  video:{
								  bofangnum:'20w',
								  shijian:'2:47'
							  },
							  sharea:false,
							  positiona:'æ·±åœ³ é¾™å²—',
							  sharenum:30,
							  pinglunnum:100,
							  zannum:50
							   
							};
					this.topiclista[this.tabindex].list.push(obj);
					this.topiclista[this.tabindex].loadtext="ä¸Šæ‹‰åŠ è½½æ›´å¤šğŸ‘†";					  
					//this.newlist[index1].loadtext="æ²¡æœ‰æ›´å¤šæ•°æ®äº†/(ã„’oã„’)/~~";					 
				}, 1000);
			}	
		}
		
	}
</script>

<style>
.userspace-head-margin{
	margin: 15rpx 0;
}
.userspace-data{
	position: relative;
	background: #FFFFFF;
	border-top-left-radius: 30rpx;
	border-top-right-radius: 30rpx;
	margin-top: -20rpx;
}
.userspace-xian{
	height: 20rpx;
	background: #F4F4F4;
}

.userspace-zhuye{
	padding: 0 30rpx;
}
.userspace-zhuye-item{
	padding: 15rpx 0;
	border-bottom: 1rpx solid #EEEEEE;
}
.userspace-zhuye-item>view{
	color: #AAAAAA;
}
.userspace-zhuye-item>view:first-child{
	color: #333333;
	font-size: 35rpx;
	padding: 15rpx 0;
}
</style>
